DROP TABLE KANPIN_ETIKETAK;
DROP TABLE ETIKETAK;
DROP TABLE KANPINAK;
DROP TABLE PROBINTZIAK;
DROP TABLE HERRIAK;

CREATE TABLE HERRIAK(
    KODEA NUMBER,
    IZENA VARCHAR2(100),
    CONSTRAINT PK_HERRIAK PRIMARY KEY (KODEA)
);

CREATE TABLE PROBINTZIAK(
    KODEA NUMBER,
    IZENA VARCHAR2(50),
    CONSTRAINT PK_PROBINTZIAK PRIMARY KEY (KODEA)
);

CREATE TABLE KANPINAK (
    KODEA VARCHAR2(8),
    IZENA VARCHAR2(50) NOT NULL,
    DESKRIBAPENA VARCHAR2(255),
    KOKALEKUA VARCHAR2(50),   
    TELEFONOA VARCHAR2(9),
    HELBIDEA VARCHAR2(100) NOT NULL,
    EMAILA VARCHAR2(100) NOT NULL,
    WEBGUNEA VARCHAR2(100),
    KATEGORIA VARCHAR2(1) NOT NULL,
    EDUKIERA NUMBER NOT NULL,
    POSTAKODEA VARCHAR2(5) NOT NULL,
    HERRI_KODEA NUMBER NOT NULL,
    PROBINTZIA_KODEA NUMBER NOT NULL,
    FRIENDLY_URL VARCHAR2(200),
    PHYSICAL_URL VARCHAR2(200),
    DATA_XML VARCHAR2(200),
    METADATA_XML VARCHAR2(200),
    ZIP_FILE VARCHAR2(200),
    CONSTRAINT PK_KANPINAK PRIMARY KEY (KODEA),
    CONSTRAINT FK_HERRIA FOREIGN KEY (HERRI_KODEA) REFERENCES HERRIAK(KODEA),
    CONSTRAINT FK_PROBINTZIA FOREIGN KEY (PROBINTZIA_KODEA) REFERENCES PROBINTZIAK(KODEA)
);

CREATE TABLE ETIKETAK (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999 INCREMENT BY 1 START WITH 1 NOT NULL,   
    ETIKETA VARCHAR2(25),
    CONSTRAINT PK_ETIKETAK PRIMARY KEY (ID)
);

CREATE TABLE KANPIN_ETIKETAK (
    ID_ETIKETA NUMBER NOT NULL,
    KANPIN_KODEA VARCHAR2(8) NOT NULL,
    CONSTRAINT PK_KANPIN_ETIKETAK PRIMARY KEY (ID_ETIKETA, KANPIN_KODEA),
    CONSTRAINT FK_KANPINA FOREIGN KEY (KANPIN_KODEA) REFERENCES KANPINAK(KODEA),
    CONSTRAINT FK_ETIKETA FOREIGN KEY (ID_ETIKETA) REFERENCES ETIKETAK(ID)
);

